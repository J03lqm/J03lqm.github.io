<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Únete a mi grupo en HangoutSync</title>
    <style>
        /* ... tus estilos CSS ... */
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; text-align: center; padding: 20px; }
        .container { background-color: white; padding: 40px; border-radius: 12px; }
        .play-button { display: inline-block; background-color: #007bff; color: white; padding: 15px 30px; text-decoration: none; font-size: 18px; border-radius: 8px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Has recibido una invitación</h1>
        <p>Para unirte al grupo, necesitas instalar la aplicación HangoutSync.</p>
        <!-- El href de este botón se actualizará con JavaScript -->
        <a id="play-store-link" href="https://play.google.com/store/apps/details?id=com.hangoutsync.hangoutsync" class="play-button">
            Descargar en Google Play
        </a>
    </div>

    <script>
window.onload = function() {
    // Obtener parámetros de la URL (ej: ?code=ABC123)
    const urlParams = new URLSearchParams(window.location.search);
    const invitationCode = urlParams.get('code') || "";

    // Construir la URL de la Play Store con referrer
    let playStoreLink = "https://play.google.com/store/apps/details?id=com.hangoutsync.hangoutsync";
    if (invitationCode) {
        const referrerParams = new URLSearchParams({
            'utm_source': 'invite_link',
            'invitation_code': invitationCode
        });
        playStoreLink += "&referrer=" + referrerParams.toString();
    }

    // Construir el deep link para la app (esto debe coincidir con tu intent-filter en AndroidManifest)
    const appDeepLink = "intent://j03lqm.github.io/hangoutsync/invite?code=" 
        + encodeURIComponent(invitationCode) 
        + "#Intent;scheme=https;package=com.hangoutsync.hangoutsync;end";

    // Intentar abrir la app
    window.location = appDeepLink;

    // Si no tiene la app, después de 1 segundo lo mandamos al Play Store
    setTimeout(() => {
        window.location = playStoreLink;
    }, 1000);

    // Actualizar botón de respaldo manual
    document.getElementById('play-store-link').href = playStoreLink;
};
    </script>
</body>
</html>
